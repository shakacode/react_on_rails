<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 840 520" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif">
  <defs>
    <!-- Gradients -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0f172a"/>
      <stop offset="100%" stop-color="#1e293b"/>
    </linearGradient>
    <linearGradient id="clientGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#f97316"/>
      <stop offset="100%" stop-color="#ea580c"/>
    </linearGradient>
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#06b6d4"/>
      <stop offset="100%" stop-color="#0891b2"/>
    </linearGradient>
    <linearGradient id="arrowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#475569"/>
      <stop offset="100%" stop-color="#64748b"/>
    </linearGradient>

    <!-- Glow filters -->
    <filter id="clientGlow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feFlood flood-color="#f97316" flood-opacity="0.3" result="color"/>
      <feComposite in="color" in2="blur" operator="in" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <filter id="serverGlow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feFlood flood-color="#06b6d4" flood-opacity="0.3" result="color"/>
      <feComposite in="color" in2="blur" operator="in" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <filter id="labelGlow" x="-10%" y="-10%" width="120%" height="120%">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feFlood flood-color="#e2e8f0" flood-opacity="0.15" result="color"/>
      <feComposite in="color" in2="blur" operator="in" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>

    <!-- Rounded rect clip for phases -->
    <clipPath id="phase1Clip"><rect x="14" y="68" width="250" height="410" rx="16"/></clipPath>
    <clipPath id="phase2Clip"><rect x="295" y="68" width="250" height="410" rx="16"/></clipPath>
    <clipPath id="phase3Clip"><rect x="576" y="68" width="250" height="410" rx="16"/></clipPath>
  </defs>

  <!-- Background -->
  <rect width="840" height="520" rx="20" fill="url(#bgGrad)"/>
  <rect width="840" height="520" rx="20" fill="none" stroke="#334155" stroke-width="1"/>

  <!-- Title -->
  <text x="420" y="38" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="700" letter-spacing="0.5">
    Top-Down Migration Strategy
  </text>
  <line x1="320" y1="50" x2="520" y2="50" stroke="#334155" stroke-width="1"/>

  <!-- ====== PHASE 1 ====== -->
  <g>
    <!-- Phase panel -->
    <rect x="14" y="68" width="250" height="410" rx="16" fill="#1a2332" stroke="#334155" stroke-width="1"/>
    <!-- Phase header -->
    <rect x="14" y="68" width="250" height="40" rx="16" fill="#1e293b"/>
    <rect x="14" y="92" width="250" height="16" fill="#1e293b"/>
    <text x="139" y="93" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="600" letter-spacing="1">PHASE 1</text>

    <!-- Phase label -->
    <text x="139" y="128" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="600" filter="url(#labelGlow)">Mark Root as Client</text>
    <text x="139" y="145" text-anchor="middle" fill="#64748b" font-size="10">Everything stays client-side</text>

    <!-- Tree lines -->
    <g stroke="#475569" stroke-width="1.5" fill="none">
      <line x1="139" y1="185" x2="139" y2="210"/>
      <line x1="139" y1="240" x2="139" y2="265"/>
      <line x1="139" y1="265" x2="80" y2="265"/>
      <line x1="139" y1="265" x2="198" y2="265"/>
      <line x1="80" y1="265" x2="80" y2="290"/>
      <line x1="198" y1="265" x2="198" y2="290"/>
      <line x1="80" y1="320" x2="80" y2="345"/>
      <line x1="80" y1="345" x2="55" y2="345"/>
      <line x1="80" y1="345" x2="120" y2="345"/>
      <line x1="55" y1="345" x2="55" y2="365"/>
      <line x1="120" y1="345" x2="120" y2="365"/>
    </g>

    <!-- App node (client - orange) -->
    <g filter="url(#clientGlow)">
      <rect x="89" y="165" width="100" height="24" rx="12" fill="url(#clientGrad)">
        <animate attributeName="opacity" values="0;1" dur="0.6s" begin="0.3s" fill="freeze"/>
      </rect>
      <text x="139" y="181" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">
        App
        <animate attributeName="opacity" values="0;1" dur="0.6s" begin="0.3s" fill="freeze"/>
      </text>
    </g>
    <!-- 'use client' badge on App -->
    <rect x="191" y="161" width="62" height="16" rx="8" fill="#7c2d12" opacity="0">
      <animate attributeName="opacity" values="0;0.9" dur="0.4s" begin="0.7s" fill="freeze"/>
    </rect>
    <text x="222" y="172" text-anchor="middle" fill="#fdba74" font-size="8" font-weight="600" opacity="0">
      'use client'
      <animate attributeName="opacity" values="0;1" dur="0.4s" begin="0.7s" fill="freeze"/>
    </text>

    <!-- Layout node (client) -->
    <g filter="url(#clientGlow)">
      <rect x="89" y="210" width="100" height="24" rx="12" fill="url(#clientGrad)" opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="0.6s" fill="freeze"/>
      </rect>
      <text x="139" y="226" text-anchor="middle" fill="#fff" font-size="11" font-weight="600" opacity="0">
        Layout
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="0.6s" fill="freeze"/>
      </text>
    </g>

    <!-- Header node (client) -->
    <g filter="url(#clientGlow)">
      <rect x="30" y="290" width="100" height="24" rx="12" fill="url(#clientGrad)" opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="0.9s" fill="freeze"/>
      </rect>
      <text x="80" y="306" text-anchor="middle" fill="#fff" font-size="11" font-weight="600" opacity="0">
        Header
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="0.9s" fill="freeze"/>
      </text>
    </g>

    <!-- Content node (client) -->
    <g filter="url(#clientGlow)">
      <rect x="148" y="290" width="100" height="24" rx="12" fill="url(#clientGrad)" opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="0.9s" fill="freeze"/>
      </rect>
      <text x="198" y="306" text-anchor="middle" fill="#fff" font-size="11" font-weight="600" opacity="0">
        Content
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="0.9s" fill="freeze"/>
      </text>
    </g>

    <!-- Logo node (client) -->
    <g filter="url(#clientGlow)">
      <rect x="10" y="365" width="90" height="24" rx="12" fill="url(#clientGrad)" opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="1.2s" fill="freeze"/>
      </rect>
      <text x="55" y="381" text-anchor="middle" fill="#fff" font-size="11" font-weight="600" opacity="0">
        Logo
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="1.2s" fill="freeze"/>
      </text>
    </g>

    <!-- SearchBar node (client) -->
    <g filter="url(#clientGlow)">
      <rect x="72" y="365" width="96" height="24" rx="12" fill="url(#clientGrad)" opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="1.2s" fill="freeze"/>
      </rect>
      <text x="120" y="381" text-anchor="middle" fill="#fff" font-size="10" font-weight="600" opacity="0">
        SearchBar
        <animate attributeName="opacity" values="0;1" dur="0.5s" begin="1.2s" fill="freeze"/>
      </text>
    </g>

    <!-- Bundle size indicator -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="1.5s" fill="freeze"/>
      <rect x="39" y="420" width="200" height="8" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
      <rect x="39" y="420" width="200" height="8" rx="4" fill="#f97316" opacity="0.7">
        <animate attributeName="width" values="0;200" dur="0.8s" begin="1.7s" fill="freeze"/>
      </rect>
      <text x="139" y="448" text-anchor="middle" fill="#f97316" font-size="10" font-weight="600">100% Client Bundle</text>
    </g>
  </g>

  <!-- Arrow 1→2 -->
  <g opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.5s" begin="2.5s" fill="freeze"/>
    <polygon points="280,278 290,273 290,283" fill="#64748b"/>
    <text x="280" y="265" text-anchor="middle" fill="#94a3b8" font-size="18">›</text>
  </g>

  <!-- ====== PHASE 2 ====== -->
  <g>
    <!-- Phase panel -->
    <rect x="295" y="68" width="250" height="410" rx="16" fill="#1a2332" stroke="#334155" stroke-width="1" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="2.8s" fill="freeze"/>
    </rect>
    <rect x="295" y="68" width="250" height="40" rx="16" fill="#1e293b" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="2.8s" fill="freeze"/>
    </rect>
    <rect x="295" y="92" width="250" height="16" fill="#1e293b" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="2.8s" fill="freeze"/>
    </rect>
    <text x="420" y="93" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="600" letter-spacing="1" opacity="0">
      PHASE 2
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="2.8s" fill="freeze"/>
    </text>

    <text x="420" y="128" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="600" filter="url(#labelGlow)" opacity="0">
      Push Boundary Down
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.0s" fill="freeze"/>
    </text>
    <text x="420" y="145" text-anchor="middle" fill="#64748b" font-size="10" opacity="0">
      Move 'use client' to leaf nodes
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.0s" fill="freeze"/>
    </text>

    <!-- Tree lines -->
    <g stroke="#475569" stroke-width="1.5" fill="none" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.2s" fill="freeze"/>
      <line x1="420" y1="185" x2="420" y2="210"/>
      <line x1="420" y1="240" x2="420" y2="265"/>
      <line x1="420" y1="265" x2="361" y2="265"/>
      <line x1="420" y1="265" x2="479" y2="265"/>
      <line x1="361" y1="265" x2="361" y2="290"/>
      <line x1="479" y1="265" x2="479" y2="290"/>
      <line x1="361" y1="320" x2="361" y2="345"/>
      <line x1="361" y1="345" x2="336" y2="345"/>
      <line x1="361" y1="345" x2="401" y2="345"/>
      <line x1="336" y1="345" x2="336" y2="365"/>
      <line x1="401" y1="345" x2="401" y2="365"/>
    </g>

    <!-- App node (server - cyan) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.4s" fill="freeze"/>
      <rect x="370" y="165" width="100" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="420" y="181" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">App</text>
    </g>

    <!-- Layout node (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.6s" fill="freeze"/>
      <rect x="370" y="210" width="100" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="420" y="226" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Layout</text>
    </g>

    <!-- Header node (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.8s" fill="freeze"/>
      <rect x="311" y="290" width="100" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="361" y="306" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Header</text>
    </g>

    <!-- Content node (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.8s" fill="freeze"/>
      <rect x="429" y="290" width="100" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="479" y="306" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Content</text>
    </g>

    <!-- Logo node (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="4.0s" fill="freeze"/>
      <rect x="296" y="365" width="80" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="336" y="381" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Logo</text>
    </g>

    <!-- SearchBar node (client - orange!) -->
    <g filter="url(#clientGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="4.0s" fill="freeze"/>
      <rect x="353" y="365" width="96" height="24" rx="12" fill="url(#clientGrad)"/>
      <text x="401" y="381" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">SearchBar</text>
    </g>
    <!-- 'use client' badge on SearchBar -->
    <rect x="420" y="361" width="62" height="16" rx="8" fill="#7c2d12" opacity="0">
      <animate attributeName="opacity" values="0;0.9" dur="0.4s" begin="4.3s" fill="freeze"/>
    </rect>
    <text x="451" y="372" text-anchor="middle" fill="#fdba74" font-size="8" font-weight="600" opacity="0">
      'use client'
      <animate attributeName="opacity" values="0;1" dur="0.4s" begin="4.3s" fill="freeze"/>
    </text>

    <!-- Bundle size indicator -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="4.5s" fill="freeze"/>
      <rect x="320" y="420" width="200" height="8" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
      <rect x="320" y="420" width="34" height="8" rx="4" fill="#f97316" opacity="0.7">
        <animate attributeName="width" values="0;34" dur="0.6s" begin="4.7s" fill="freeze"/>
      </rect>
      <rect x="320" y="420" width="200" height="8" rx="4" fill="url(#serverGrad)" opacity="0.15"/>
      <text x="420" y="448" text-anchor="middle" fill="#06b6d4" font-size="10" font-weight="600">~17% Client Bundle</text>
    </g>
  </g>

  <!-- Arrow 2→3 -->
  <g opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5.0s" fill="freeze"/>
    <polygon points="561,278 571,273 571,283" fill="#64748b"/>
    <text x="561" y="265" text-anchor="middle" fill="#94a3b8" font-size="18">›</text>
  </g>

  <!-- ====== PHASE 3 ====== -->
  <g>
    <!-- Phase panel -->
    <rect x="576" y="68" width="250" height="410" rx="16" fill="#1a2332" stroke="#334155" stroke-width="1" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="5.3s" fill="freeze"/>
    </rect>
    <rect x="576" y="68" width="250" height="40" rx="16" fill="#1e293b" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="5.3s" fill="freeze"/>
    </rect>
    <rect x="576" y="92" width="250" height="16" fill="#1e293b" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="5.3s" fill="freeze"/>
    </rect>
    <text x="701" y="93" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="600" letter-spacing="1" opacity="0">
      PHASE 3
      <animate attributeName="opacity" values="0;1" dur="0.6s" begin="5.3s" fill="freeze"/>
    </text>

    <text x="701" y="128" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="600" filter="url(#labelGlow)" opacity="0">
      Split Mixed Components
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5.5s" fill="freeze"/>
    </text>
    <text x="701" y="145" text-anchor="middle" fill="#64748b" font-size="10" opacity="0">
      Separate data fetching from interactivity
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5.5s" fill="freeze"/>
    </text>

    <!-- Tree lines -->
    <g stroke="#475569" stroke-width="1.5" fill="none" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5.7s" fill="freeze"/>
      <line x1="701" y1="185" x2="701" y2="210"/>
      <line x1="701" y1="240" x2="701" y2="258"/>
      <line x1="701" y1="258" x2="641" y2="258"/>
      <line x1="701" y1="258" x2="761" y2="258"/>
      <line x1="641" y1="258" x2="641" y2="276"/>
      <line x1="761" y1="258" x2="761" y2="276"/>
      <!-- Header subtree -->
      <line x1="641" y1="306" x2="641" y2="325"/>
      <line x1="641" y1="325" x2="616" y2="325"/>
      <line x1="641" y1="325" x2="666" y2="325"/>
      <line x1="616" y1="325" x2="616" y2="340"/>
      <line x1="666" y1="325" x2="666" y2="340"/>
      <!-- Content subtree split -->
      <line x1="761" y1="306" x2="761" y2="325"/>
      <line x1="761" y1="325" x2="726" y2="325"/>
      <line x1="761" y1="325" x2="796" y2="325"/>
      <line x1="726" y1="325" x2="726" y2="340"/>
      <line x1="796" y1="325" x2="796" y2="340"/>
    </g>

    <!-- App node (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5.9s" fill="freeze"/>
      <rect x="651" y="165" width="100" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="701" y="181" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">App</text>
    </g>

    <!-- Layout node (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="6.0s" fill="freeze"/>
      <rect x="651" y="210" width="100" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="701" y="226" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Layout</text>
    </g>

    <!-- Header node (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="6.1s" fill="freeze"/>
      <rect x="591" y="276" width="100" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="641" y="292" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Header</text>
    </g>

    <!-- ProductPage (server - was Content, now split) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="6.1s" fill="freeze"/>
      <rect x="706" y="276" width="110" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="761" y="292" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">ProductPage</text>
    </g>

    <!-- Logo (server) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="6.3s" fill="freeze"/>
      <rect x="586" y="340" width="60" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="616" y="356" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">Logo</text>
    </g>

    <!-- SearchBar (client - stays client) -->
    <g filter="url(#clientGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="6.3s" fill="freeze"/>
      <rect x="632" y="340" width="68" height="24" rx="12" fill="url(#clientGrad)"/>
      <text x="666" y="356" text-anchor="middle" fill="#fff" font-size="9" font-weight="600">SearchBar</text>
    </g>

    <!-- ReviewList (server - extracted from Content) -->
    <g filter="url(#serverGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="6.5s" fill="freeze"/>
      <rect x="693" y="340" width="66" height="24" rx="12" fill="url(#serverGrad)"/>
      <text x="726" y="356" text-anchor="middle" fill="#fff" font-size="9" font-weight="600">Reviews</text>
    </g>

    <!-- AddToCart (client - extracted interactive part) -->
    <g filter="url(#clientGlow)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="6.5s" fill="freeze"/>
      <rect x="762" y="340" width="64" height="24" rx="12" fill="url(#clientGrad)"/>
      <text x="794" y="356" text-anchor="middle" fill="#fff" font-size="9" font-weight="600">AddCart</text>
    </g>

    <!-- Split indicator - dashed line around extracted client leaf -->
    <rect x="758" y="336" width="72" height="32" rx="8" fill="none" stroke="#f97316" stroke-width="1" stroke-dasharray="3,3" opacity="0">
      <animate attributeName="opacity" values="0;0.6" dur="0.5s" begin="6.8s" fill="freeze"/>
    </rect>
    <rect x="628" y="336" width="76" height="32" rx="8" fill="none" stroke="#f97316" stroke-width="1" stroke-dasharray="3,3" opacity="0">
      <animate attributeName="opacity" values="0;0.6" dur="0.5s" begin="6.8s" fill="freeze"/>
    </rect>

    <!-- Bundle size indicator -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="7.0s" fill="freeze"/>
      <rect x="601" y="420" width="200" height="8" rx="4" fill="#1e293b" stroke="#334155" stroke-width="0.5"/>
      <rect x="601" y="420" width="50" height="8" rx="4" fill="#f97316" opacity="0.7">
        <animate attributeName="width" values="0;50" dur="0.6s" begin="7.2s" fill="freeze"/>
      </rect>
      <rect x="601" y="420" width="200" height="8" rx="4" fill="url(#serverGrad)" opacity="0.15"/>
      <text x="701" y="448" text-anchor="middle" fill="#06b6d4" font-size="10" font-weight="600">~25% Client Bundle</text>
      <text x="701" y="462" text-anchor="middle" fill="#34d399" font-size="9" font-weight="600">Only interactive leaves ship JS</text>
    </g>
  </g>

  <!-- Legend -->
  <g opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.6s" begin="7.5s" fill="freeze"/>
    <!-- Server legend -->
    <rect x="275" y="496" width="12" height="12" rx="6" fill="url(#serverGrad)"/>
    <text x="292" y="507" fill="#94a3b8" font-size="11">Server Component</text>
    <!-- Client legend -->
    <rect x="420" y="496" width="12" height="12" rx="6" fill="url(#clientGrad)"/>
    <text x="437" y="507" fill="#94a3b8" font-size="11">Client Component</text>
  </g>

  <!-- Pulsing dot animation on phase transitions -->
  <circle cx="280" cy="278" r="3" fill="#64748b" opacity="0">
    <animate attributeName="opacity" values="0;0.8;0" dur="1.5s" begin="2.5s" repeatCount="2"/>
    <animate attributeName="r" values="3;6;3" dur="1.5s" begin="2.5s" repeatCount="2"/>
  </circle>
  <circle cx="561" cy="278" r="3" fill="#64748b" opacity="0">
    <animate attributeName="opacity" values="0;0.8;0" dur="1.5s" begin="5.0s" repeatCount="2"/>
    <animate attributeName="r" values="3;6;3" dur="1.5s" begin="5.0s" repeatCount="2"/>
  </circle>
</svg>