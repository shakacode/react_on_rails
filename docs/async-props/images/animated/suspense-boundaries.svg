<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <!-- Gradients -->
    <linearGradient id="suspenseGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#818cf8"/>
      <stop offset="100%" style="stop-color:#6366f1"/>
    </linearGradient>
    <linearGradient id="resolvedGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#34d399"/>
      <stop offset="100%" style="stop-color:#10b981"/>
    </linearGradient>
    <linearGradient id="pendingGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fbbf24"/>
      <stop offset="100%" style="stop-color:#f59e0b"/>
    </linearGradient>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>

    <!-- Glow filters -->
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Pulse animation for pending state -->
    <radialGradient id="pulseGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:0.8">
        <animate attributeName="stop-opacity" values="0.8;0.3;0.8" dur="1.5s" repeatCount="indefinite"/>
      </stop>
      <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0.3">
        <animate attributeName="stop-opacity" values="0.3;0.1;0.3" dur="1.5s" repeatCount="indefinite"/>
      </stop>
    </radialGradient>
  </defs>

  <!-- Background -->
  <rect width="900" height="500" fill="url(#bgGrad)"/>

  <!-- Decorative grid -->
  <g stroke="#334155" stroke-width="0.5" opacity="0.3">
    <line x1="0" y1="100" x2="900" y2="100"/>
    <line x1="0" y1="200" x2="900" y2="200"/>
    <line x1="0" y1="300" x2="900" y2="300"/>
    <line x1="0" y1="400" x2="900" y2="400"/>
    <line x1="150" y1="0" x2="150" y2="500"/>
    <line x1="300" y1="0" x2="300" y2="500"/>
    <line x1="450" y1="0" x2="450" y2="500"/>
    <line x1="600" y1="0" x2="600" y2="500"/>
    <line x1="750" y1="0" x2="750" y2="500"/>
  </g>

  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-size="24" font-weight="bold" fill="white">React Suspense Boundaries</text>
  <text x="450" y="65" text-anchor="middle" font-size="14" fill="#94a3b8">How fallbacks transform into content</text>

  <!-- Component Tree Visualization -->
  <g transform="translate(50, 100)">
    <!-- App Container -->
    <rect x="0" y="0" width="380" height="350" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="190" y="30" text-anchor="middle" font-size="14" font-weight="600" fill="#60a5fa">&lt;App&gt;</text>

    <!-- Header (no suspense, renders immediately) -->
    <g transform="translate(20, 50)">
      <rect x="0" y="0" width="340" height="40" rx="8" fill="#3b82f6" filter="url(#glow)">
        <animate attributeName="opacity" values="0;1" dur="0.3s" begin="0.2s" fill="freeze"/>
      </rect>
      <text x="170" y="25" text-anchor="middle" font-size="12" fill="white" opacity="0">
        &lt;Header /&gt; - Renders immediately
        <animate attributeName="opacity" values="0;1" dur="0.3s" begin="0.2s" fill="freeze"/>
      </text>
    </g>

    <!-- Suspense Boundary 1: Users -->
    <g transform="translate(20, 110)">
      <!-- Suspense wrapper -->
      <rect x="0" y="0" width="160" height="120" rx="8" fill="none" stroke="#818cf8" stroke-width="2" stroke-dasharray="8,4">
        <animate attributeName="stroke" values="#818cf8;#10b981" dur="0.3s" begin="2s" fill="freeze"/>
        <animate attributeName="stroke-dasharray" values="8,4;0,0" dur="0.3s" begin="2s" fill="freeze"/>
      </rect>
      <text x="80" y="-8" text-anchor="middle" font-size="10" fill="#a5b4fc">&lt;Suspense&gt;</text>

      <!-- Fallback (skeleton) - visible initially -->
      <g opacity="1">
        <animate attributeName="opacity" values="1;0" dur="0.2s" begin="2s" fill="freeze"/>
        <rect x="10" y="15" width="140" height="90" rx="6" fill="#334155"/>
        <rect x="20" y="25" width="80" height="10" rx="3" fill="#475569">
          <animate attributeName="width" values="80;100;80" dur="1s" repeatCount="indefinite"/>
        </rect>
        <rect x="20" y="45" width="120" height="8" rx="3" fill="#475569"/>
        <rect x="20" y="60" width="100" height="8" rx="3" fill="#475569"/>
        <rect x="20" y="75" width="110" height="8" rx="3" fill="#475569"/>
        <text x="80" y="100" text-anchor="middle" font-size="9" fill="#64748b">Loading users...</text>
      </g>

      <!-- Actual content - appears after delay -->
      <g opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.3s" begin="2s" fill="freeze"/>
        <rect x="10" y="15" width="140" height="90" rx="6" fill="url(#resolvedGrad)"/>
        <text x="80" y="45" text-anchor="middle" font-size="11" fill="white" font-weight="500">&lt;UsersList /&gt;</text>
        <text x="80" y="65" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.7)">✓ Data loaded</text>
        <text x="80" y="85" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.7)">3 users displayed</text>
      </g>
    </g>

    <!-- Suspense Boundary 2: Posts -->
    <g transform="translate(200, 110)">
      <!-- Suspense wrapper -->
      <rect x="0" y="0" width="160" height="120" rx="8" fill="none" stroke="#818cf8" stroke-width="2" stroke-dasharray="8,4">
        <animate attributeName="stroke" values="#818cf8;#10b981" dur="0.3s" begin="3.5s" fill="freeze"/>
        <animate attributeName="stroke-dasharray" values="8,4;0,0" dur="0.3s" begin="3.5s" fill="freeze"/>
      </rect>
      <text x="80" y="-8" text-anchor="middle" font-size="10" fill="#a5b4fc">&lt;Suspense&gt;</text>

      <!-- Fallback (skeleton) -->
      <g opacity="1">
        <animate attributeName="opacity" values="1;0" dur="0.2s" begin="3.5s" fill="freeze"/>
        <rect x="10" y="15" width="140" height="90" rx="6" fill="#334155"/>
        <rect x="20" y="25" width="80" height="10" rx="3" fill="#475569">
          <animate attributeName="width" values="80;100;80" dur="1.2s" repeatCount="indefinite"/>
        </rect>
        <rect x="20" y="45" width="120" height="8" rx="3" fill="#475569"/>
        <rect x="20" y="60" width="100" height="8" rx="3" fill="#475569"/>
        <rect x="20" y="75" width="110" height="8" rx="3" fill="#475569"/>
        <text x="80" y="100" text-anchor="middle" font-size="9" fill="#64748b">Loading posts...</text>
      </g>

      <!-- Actual content -->
      <g opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.3s" begin="3.5s" fill="freeze"/>
        <rect x="10" y="15" width="140" height="90" rx="6" fill="url(#resolvedGrad)"/>
        <text x="80" y="45" text-anchor="middle" font-size="11" fill="white" font-weight="500">&lt;PostsList /&gt;</text>
        <text x="80" y="65" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.7)">✓ Data loaded</text>
        <text x="80" y="85" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.7)">5 posts displayed</text>
      </g>
    </g>

    <!-- Suspense Boundary 3: Comments (nested) -->
    <g transform="translate(20, 250)">
      <!-- Suspense wrapper -->
      <rect x="0" y="0" width="340" height="80" rx="8" fill="none" stroke="#818cf8" stroke-width="2" stroke-dasharray="8,4">
        <animate attributeName="stroke" values="#818cf8;#10b981" dur="0.3s" begin="5s" fill="freeze"/>
        <animate attributeName="stroke-dasharray" values="8,4;0,0" dur="0.3s" begin="5s" fill="freeze"/>
      </rect>
      <text x="170" y="-8" text-anchor="middle" font-size="10" fill="#a5b4fc">&lt;Suspense&gt;</text>

      <!-- Fallback -->
      <g opacity="1">
        <animate attributeName="opacity" values="1;0" dur="0.2s" begin="5s" fill="freeze"/>
        <rect x="10" y="15" width="320" height="50" rx="6" fill="#334155"/>
        <text x="170" y="45" text-anchor="middle" font-size="10" fill="#64748b">Loading comments...</text>
      </g>

      <!-- Actual content -->
      <g opacity="0">
        <animate attributeName="opacity" values="0;1" dur="0.3s" begin="5s" fill="freeze"/>
        <rect x="10" y="15" width="320" height="50" rx="6" fill="url(#resolvedGrad)"/>
        <text x="170" y="45" text-anchor="middle" font-size="11" fill="white" font-weight="500">&lt;Comments /&gt; - 12 comments loaded</text>
      </g>
    </g>
  </g>

  <!-- Timeline on the right -->
  <g transform="translate(480, 100)">
    <text x="0" y="0" font-size="16" font-weight="600" fill="white">Timeline</text>

    <!-- Timeline track -->
    <rect x="20" y="20" width="8" height="320" rx="4" fill="#334155"/>

    <!-- Progress indicator -->
    <rect x="20" y="20" width="8" height="0" rx="4" fill="url(#suspenseGrad)">
      <animate attributeName="height" values="0;320" dur="6s" fill="freeze"/>
    </rect>

    <!-- Event 1: Shell renders -->
    <g transform="translate(0, 30)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.3s" begin="0.2s" fill="freeze"/>
      <circle cx="24" cy="0" r="12" fill="#3b82f6" filter="url(#glow)"/>
      <text x="24" y="4" text-anchor="middle" font-size="10" fill="white">1</text>
      <text x="50" y="4" font-size="12" fill="white" font-weight="500">Shell Renders</text>
      <text x="50" y="20" font-size="10" fill="#94a3b8">Header visible, skeletons shown</text>
      <rect x="300" y="-8" width="70" height="22" rx="11" fill="#3b82f6"/>
      <text x="335" y="7" text-anchor="middle" font-size="10" fill="white">50ms</text>
    </g>

    <!-- Event 2: Users resolve -->
    <g transform="translate(0, 110)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.3s" begin="2s" fill="freeze"/>
      <circle cx="24" cy="0" r="12" fill="#10b981" filter="url(#glow)"/>
      <text x="24" y="4" text-anchor="middle" font-size="10" fill="white">2</text>
      <text x="50" y="4" font-size="12" fill="white" font-weight="500">Users Suspense Resolves</text>
      <text x="50" y="20" font-size="10" fill="#94a3b8">UsersList replaces skeleton</text>
      <rect x="300" y="-8" width="70" height="22" rx="11" fill="#10b981"/>
      <text x="335" y="7" text-anchor="middle" font-size="10" fill="white">500ms</text>
    </g>

    <!-- Event 3: Posts resolve -->
    <g transform="translate(0, 190)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.3s" begin="3.5s" fill="freeze"/>
      <circle cx="24" cy="0" r="12" fill="#10b981" filter="url(#glow)"/>
      <text x="24" y="4" text-anchor="middle" font-size="10" fill="white">3</text>
      <text x="50" y="4" font-size="12" fill="white" font-weight="500">Posts Suspense Resolves</text>
      <text x="50" y="20" font-size="10" fill="#94a3b8">PostsList replaces skeleton</text>
      <rect x="300" y="-8" width="70" height="22" rx="11" fill="#10b981"/>
      <text x="335" y="7" text-anchor="middle" font-size="10" fill="white">800ms</text>
    </g>

    <!-- Event 4: Comments resolve -->
    <g transform="translate(0, 270)" opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.3s" begin="5s" fill="freeze"/>
      <circle cx="24" cy="0" r="12" fill="#10b981" filter="url(#glow)"/>
      <text x="24" y="4" text-anchor="middle" font-size="10" fill="white">4</text>
      <text x="50" y="4" font-size="12" fill="white" font-weight="500">Comments Suspense Resolves</text>
      <text x="50" y="20" font-size="10" fill="#94a3b8">All content loaded!</text>
      <rect x="300" y="-8" width="70" height="22" rx="11" fill="#10b981"/>
      <text x="335" y="7" text-anchor="middle" font-size="10" fill="white">1200ms</text>
    </g>
  </g>

  <!-- Legend -->
  <g transform="translate(50, 465)">
    <rect x="0" y="0" width="800" height="30" rx="6" fill="#1e293b"/>

    <rect x="20" y="8" width="14" height="14" rx="3" fill="none" stroke="#818cf8" stroke-width="2" stroke-dasharray="4,2"/>
    <text x="42" y="19" font-size="11" fill="#94a3b8">Pending Suspense</text>

    <rect x="180" y="8" width="14" height="14" rx="3" fill="none" stroke="#10b981" stroke-width="2"/>
    <text x="202" y="19" font-size="11" fill="#94a3b8">Resolved Suspense</text>

    <rect x="340" y="8" width="14" height="14" rx="3" fill="#334155"/>
    <text x="362" y="19" font-size="11" fill="#94a3b8">Fallback (Skeleton)</text>

    <rect x="500" y="8" width="14" height="14" rx="3" fill="url(#resolvedGrad)"/>
    <text x="522" y="19" font-size="11" fill="#94a3b8">Loaded Content</text>

    <rect x="660" y="8" width="14" height="14" rx="3" fill="#3b82f6"/>
    <text x="682" y="19" font-size="11" fill="#94a3b8">Static Content</text>
  </g>
</svg>
