#!/usr/bin/env ruby
# frozen_string_literal: true

# Shakapacker precompile hook for React on Rails Pro test dummy app
#
# This script loads the shared precompile hook implementation to avoid duplication.
# The shared implementation is maintained in lib/tasks/precompile/shakapacker_precompile_hook_shared.rb

# Find the gem root directory (four levels up from react_on_rails_pro/spec/dummy/bin)
gem_root = File.expand_path("../../../..", __dir__)
shared_hook = File.join(gem_root, "lib", "tasks", "precompile", "shakapacker_precompile_hook_shared.rb")

unless File.exist?(shared_hook)
  warn "‚ùå Error: Shared precompile hook not found at #{shared_hook}"
  exit 1
end

# Load and execute the shared hook
load shared_hook
