#!/usr/bin/env zsh
# Wrapper script to run commands with mise-managed tool versions
# Usage: bin/mise-exec <command> [args...]
#
# This is needed because Conductor (and other non-interactive shells) don't
# source .zshrc, so mise's PATH ordering based on .tool-versions isn't active
# by default.
#
# Examples:
#   bin/mise-exec ruby --version       # Uses .tool-versions Ruby
#   bin/mise-exec bundle exec rubocop  # Correct Ruby for linting
#   bin/mise-exec git commit -m "msg"  # Pre-commit hooks work correctly
#   bin/mise-exec pnpm install         # Uses .tool-versions Node
#
# See: https://github.com/shakacode/react_on_rails-demos/issues/105

if ! command -v mise &> /dev/null; then
  echo "Error: mise is not installed or not in PATH" >&2
  echo "Install: https://mise.jdx.dev/getting-started.html" >&2
  exit 1
fi

exec mise exec -- "$@"
